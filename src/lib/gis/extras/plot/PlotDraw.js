//>>built
define("plot/PlotDraw","dojo/_base/declare dojo/_base/lang dojo/Evented ./constants ./plotUtils esri/graphic esri/Color esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol ./geometry/Arc ./geometry/AssaultDirection ./geometry/AttackArrow ./geometry/Circle ./geometry/ClosedCurve ./geometry/Curve ./geometry/DoubleArrow ./geometry/Ellipse ./geometry/FineArrow ./geometry/FreehandLine ./geometry/FreehandPolygon ./geometry/GatheringPlace ./geometry/Lune ./geometry/Marker ./geometry/Polygon ./geometry/Polyline ./geometry/Rectangle ./geometry/Sector ./geometry/SquadCombat ./geometry/StraightArrow ./geometry/TailedAttackArrow ./geometry/TailedSquadCombat".split(" "),
function(n,e,p,g,h,q,f,k,l,m,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){var c=n([p],{constructor:function(a){this.markerSymbol=new k(k.STYLE_SQUARE,8,null,new f("#000000"));this.lineSymbol=new l(l.STYLE_SOLID,new f("#000000"),2);this.fillSymbol=new m(m.STYLE_SOLID,this.lineSymbol,new f([0,0,0,0.25]));this._firstClickHandler=e.hitch(this,this._firstClickHandler);this._nextClickHandler=e.hitch(this,this._nextClickHandler);this._doubleClickHandler=e.hitch(this,this._doubleClickHandler);this._mouseMoveHandler=
e.hitch(this,this._mouseMoveHandler);this._plotParams=this._plotType=this._graphic=this._plot=this._points=null;this._map=a},activate:function(a,b){this.deactivate();this._map.disableDoubleClickZoom();this._firstClick_Connect=this._map.on("click",this._firstClickHandler);this._plotType=a;this._plotParams=b},deactivate:function(){this._firstClick_Connect&&this._firstClick_Connect.remove();this._nextClick_Connect&&this._nextClick_Connect.remove();this._doubleClick_Connect&&this._doubleClick_Connect.remove();
this._mouseMove_Connect&&this._mouseMove_Connect.remove();this._map.enableDoubleClickZoom();this._map.graphics.remove(this._graphic);this._points=[];this._plotParams=this._plotType=this._graphic=this._plot=null},isDrawing:null!=this._plotType,_firstClickHandler:function(a){this._firstClick_Connect.remove();this._points.push([a.mapPoint.x,a.mapPoint.y]);this._plot=c.createPlot(this._plotType,this._points,this._map.spatialReference.wkid);this._graphic=new q;this._graphic.setSymbol(this._generateSymbol(this._plot));
this._map.graphics.add(this._graphic);this._plot.fixPointCount==this._plot.getPointCount()?this._doubleClickHandler(a):(this._nextClick_Connect=this._map.on("click",this._nextClickHandler),this._plot.freehand||(this._doubleClick_Connect=this._map.on("dbl-click",this._doubleClickHandler)),this._mouseMove_Connect=this._map.on("mouse-move",this._mouseMoveHandler))},_nextClickHandler:function(a){if(this._plot.freehand||!(h.distance([a.mapPoint.x,a.mapPoint.y],this._points[this._points.length-1])<g.ZERO_TOLERANCE))this._points.push([a.mapPoint.x,
a.mapPoint.y]),this._plot.setPoints(this._points),this._plot.fixPointCount==this._plot.getPointCount()?this._doubleClickHandler(a):(this._plot&&this._plot.freehand&&this._doubleClickHandler(a),this._graphic.setGeometry(this._plot.toGeometry()))},_doubleClickHandler:function(a){this.emit("draw-end",{geometry:this._plot.toGeometry(),plot:this._plot});this.deactivate()},_mouseMoveHandler:function(a){h.distance([a.mapPoint.x,a.mapPoint.y],this._points[this._points.length-1])<g.ZERO_TOLERANCE||(this._plot.freehand?
(this._points.push([a.mapPoint.x,a.mapPoint.y]),this._plot.setPoints(this._points)):(a=this._points.concat([[a.mapPoint.x,a.mapPoint.y]]),this._plot.setPoints(a)),this._graphic.setGeometry(this._plot.toGeometry()))},_generateSymbol:function(a){var b;"point"===a.type?b=this.markerSymbol:"polyline"===a.type?b=this.lineSymbol:"polygon"===a.type&&(b=this.fillSymbol);return b}});c.createPlot=function(a,b,d){switch(a){case c.ARC:return new r(b,d);case c.ELLIPSE:return new y(b,d);case c.CURVE:return new w(b,
d);case c.CLOSED_CURVE:return new v(b,d);case c.LUNE:return new D(b,d);case c.SECTOR:return new I(b,d);case c.GATHERING_PLACE:return new C(b,d);case c.STRAIGHT_ARROW:return new K(b,d);case c.ASSAULT_DIRECTION:return new s(b,d);case c.ATTACK_ARROW:return new t(b,d);case c.FINE_ARROW:return new z(b,d);case c.CIRCLE:return new u(b,d);case c.DOUBLE_ARROW:return new x(b,d);case c.TAILED_ATTACK_ARROW:return new L(b,d);case c.SQUAD_COMBAT:return new J(b,d);case c.TAILED_SQUAD_COMBAT:return new M(b,d);case c.FREEHAND_LINE:return new A(b,
d);case c.FREEHAND_POLYGON:return new B(b,d);case c.POLYGON:return new F(b,d);case c.MARKER:return new E(b,d);case c.RECTANGLE:return new H(b,d);case c.POLYLINE:return new G(b,d)}};e.mixin(c,{ARC:"arc",ELLIPSE:"ellipse",CURVE:"curve",CLOSED_CURVE:"closedcurve",LUNE:"lune",SECTOR:"sector",GATHERING_PLACE:"gatheringplace",STRAIGHT_ARROW:"straightarrow",ASSAULT_DIRECTION:"assaultdirection",ATTACK_ARROW:"attackarrow",TAILED_ATTACK_ARROW:"tailedattackarrow",SQUAD_COMBAT:"squadcombat",TAILED_SQUAD_COMBAT:"tailedsquadcombat",
FINE_ARROW:"finearrow",CIRCLE:"circle",DOUBLE_ARROW:"doublearrow",POLYLINE:"polyline",FREEHAND_LINE:"freehandline",POLYGON:"polygon",FREEHAND_POLYGON:"freehandpolygon",RECTANGLE:"rectangle",MARKER:"marker",TRIANGLE:"triangle"});return c});
//# sourceMappingURL=PlotDraw.js.map